<html>

<head>
	<script async src="../../../build/dev/prebid.js"></script>
	<script async src="https://www.googletagservices.com/tag/js/gpt.js"></script>
	<script>
		const FAILSAFE_TIMEOUT = 3300;
		const PREBID_TIMEOUT = 1000;

		const adUnits = [{
			code: 'div-gpt-ad-1460505748561-0',
			mediaTypes: {
				banner: {
					sizes: [[1000, 300], [970, 90], [728, 90], [300, 250]]
				},
				video: {
					context: 'instream',
					playerSize: [640, 480]
				},
				native: {
					image: {
						required: true,
						sizes: [150, 50]
					},
					title: {
						required: true,
						len: 80
					},
					sponsoredBy: {
						required: true
					},
					clickUrl: {
						required: true
					},
					privacyLink: {
						required: false
					},
					body: {
						required: true
					},
					icon: {
						required: true,
						sizes: [50, 50]
					}
				}
			},
			bids: [{
				bidder: 'appnexus',
				params: {
					placementId: 13144370
				},
				sizeConfig: [
					{ minViewPort: [0, 0], relevantMediaTypes: ['video'] },
					{ minViewPort: [1000, 0], relevantMediaTypes: ['banner'] }
				]
			}, {
				bidder: 'rubicon',
				params: {
					accountId: 14062,
					siteId: 70608,
					zoneId: 498816
				}
			}]
		}];
		var pbjs = pbjs || {};
		pbjs.que = pbjs.que || [];

	</script>

	<script>
		var googletag = googletag || {};
		googletag.cmd = googletag.cmd || [];
		googletag.cmd.push(function () {
			googletag.pubads().disableInitialLoad();
		});

		pbjs.que.push(function () {
			pbjs.addAdUnits(adUnits);
			pbjs.requestBids({
				bidsBackHandler: sendAdserverRequest,
				timeout: PREBID_TIMEOUT
			});
		});

		function sendAdserverRequest() {
			if (pbjs.adserverRequestSent) return;
			pbjs.adserverRequestSent = true;
			googletag.cmd.push(function () {
				pbjs.que.push(function () {
					pbjs.setTargetingForGPTAsync();
					googletag.pubads().refresh();
				});
			});
		}

		setTimeout(function () {
			sendAdserverRequest();
		}, FAILSAFE_TIMEOUT);

	</script>

	<script>
		googletag.cmd.push(function () {
			googletag.defineSlot('/19968336/header-bid-tag-0', [728, 90], 'div-gpt-ad-1460505748561-0').addService(googletag.pubads());

			googletag.pubads().enableSingleRequest();
			googletag.enableServices();
		});
	</script>
</head>

<body>
	<h2>Prebid.js Test</h2>
	<h5>Div-1</h5>
	<div id='div-gpt-ad-1460505748561-0'>
		<script type='text/javascript'>
			googletag.cmd.push(function () { googletag.display('div-gpt-ad-1460505748561-0'); });
		</script>
	</div>
</body>

</html>
