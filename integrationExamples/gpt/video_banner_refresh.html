<!DOCTYPE html>
<html>

<head>
  <script src='//www.googletagservices.com/tag/js/gpt.js' async=true></script>

  <!-- videojs -->
  <link rel="stylesheet" href="http://vjs.zencdn.net/5.9.2/video-js.css">
  <script type="text/javascript" src="http://vjs.zencdn.net/5.9.2/video.js"></script>

  <!-- videojs-vast-vpaid -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/videojs-vast-vpaid/2.0.2/videojs.vast.vpaid.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-vast-vpaid/2.0.2/videojs_5.vast.vpaid.min.js"></script>
</head>

<body>
  <script type="text/javascript" src="../../build/dev/prebid.js" async></script>
  <script src="test_pb.js" async=true></script>
  <script>
    var googletag = googletag || {};
    googletag.cmd = googletag.cmd || [];

    googletag.cmd.push(function () {
      googletag
        .defineSlot('/19968336/header-bid-tag-0', [[300, 250], [300, 600]], 'div-1')
        .addService(googletag.pubads());

      // var slot1 = googletag.defineSlot('/19968336/prebid_outstream_adunit_1', [[1, 1]], 'out-video1').addService(googletag.pubads());
      googletag.defineSlot('/19968336/prebid_outstream_adunit_1', [[1, 1]], 'out-video1').addService(googletag.pubads());

      googletag.pubads().addEventListener('slotRenderEnded', function (event) {
        console.log('slotRenderEnded');
      });

      googletag.pubads().disableInitialLoad();
      googletag.pubads().enableSingleRequest();
      googletag.enableServices();
    });
  </script>

  <p><button onclick="pbjs.refreshAds(['div-1','out-video1','video1'])">Refresh Ad Unit</button></p>

  <div id='div-1'>
    <p>Prebid Banner Ad</p>
    <script type='text/javascript'>
      googletag.cmd.push(function () {
        console.log('invoking display');
        googletag.display('div-1');
      });
    </script>
  </div>

  <br />
  <br />
  <br />

  <p>Prebid Outstream Video Ad</p>
  <div id='out-video1'>
    
    <script type='text/javascript'>
      googletag.cmd.push(function () {
        googletag.display('out-video1');
      });

    </script>
  </div>
  <br />
  <br />
  <br />


  <div class="example-video-container">
    <p>Prebid Instream Video Ad</p>
    <video id="vid1" class="video-js vjs-default-skin vjs-big-play-centered" controls data-setup='{}' width='640' height='480'>
      <source src="http://vjs.zencdn.net/v/oceans.mp4" type='video/mp4' />
      <source src="http://vjs.zencdn.net/v/oceans.webm" type='video/webm' />
      <source src="http://vjs.zencdn.net/v/oceans.ogv" type='video/ogg' />
    </video>
  </div>

  <script>
    var vid1 = videojs('vid1');

    function invokeVideoPlayer(url) {
      videojs("vid1").ready(function () {
        var player = this;
        var vastAd = player.vastClient({
          adTagUrl: url,
          playAdAlways: true,
          verbosity: 4,
          vpaidFlashLoaderPath: "https://github.com/MailOnline/videojs-vast-vpaid/blob/RELEASE/bin/VPAIDFlash.swf?raw=true",
          autoplay: true
        });

        player.muted(true);
        player.play();
      });
    }
  </script>
</body>

</html>